{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from \"react\";\nimport { Component } from \"react\";\nimport axios from \"axios\";\nimport Loader from \"../Loader/Loader\";\nimport ErrorMessage from \"../ErrorMessage/ErrorMessage\";\nimport { BASE_URL } from \"../../constants\";\n\nvar withAPIRequest = function withAPIRequest(WrappedComponent, getApiEndpoint) {\n  var _temp;\n\n  return _temp =\n  /*#__PURE__*/\n  function (_Component) {\n    _inherits(_temp, _Component);\n\n    function _temp() {\n      var _getPrototypeOf2;\n\n      var _this;\n\n      _classCallCheck(this, _temp);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(_temp)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n      _defineProperty(_assertThisInitialized(_this), \"state\", {\n        load: true,\n        error: false,\n        data: []\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"loadData\", function () {\n        var _getApiEndpoint = getApiEndpoint(_this.props),\n            url = _getApiEndpoint.url;\n\n        axios.get(BASE_URL + url).then(function (response) {\n          _this.handleEndLoad(response.data);\n        })[\"catch\"](function () {\n          _this.handleErrorLoad();\n        });\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"handleEndLoad\", function (newData) {\n        _this.setState({\n          load: false,\n          error: false,\n          data: newData\n        });\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"handleErrorLoad\", function () {\n        _this.setState({\n          load: false,\n          error: true\n        });\n      });\n\n      return _this;\n    }\n\n    _createClass(_temp, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        this.loadData();\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$state = this.state,\n            load = _this$state.load,\n            error = _this$state.error,\n            data = _this$state.data;\n        if (load) return React.createElement(Loader, null);\n        if (error) return React.createElement(ErrorMessage, null);\n        return React.createElement(WrappedComponent, _extends({\n          data: data\n        }, this.props));\n      }\n    }]);\n\n    return _temp;\n  }(Component), _temp;\n};\n\nexport default withAPIRequest;","map":null,"metadata":{},"sourceType":"module"}