{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from \"react\";\nimport { Component } from \"react\";\nimport axios from \"axios\";\nimport { Grid, CircularProgress, Typography, Card } from \"@material-ui/core\";\nimport { BASE_URL, NO_AVATAR } from \"../../constants\";\nimport PlayerHeader from \"./Header\";\nimport RecentMatches from \"./RecentMatches/RecentMatches\";\n\nvar PLayerInfo =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PLayerInfo, _Component);\n\n  function PLayerInfo() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PLayerInfo);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PLayerInfo)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      load: true,\n      error: false,\n      players: {\n        profile: {\n          avatarfull: NO_AVATAR,\n          personaname: \"Имя\",\n          profileurl: \"https://steamcommunity.com/\"\n        }\n      },\n      recentMatches: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"loadPlayers\", function () {\n      var id = _this.props.id;\n      axios.get(BASE_URL + \"players/\" + id).then(function (response) {\n        //console.dir(response.data);\n        _this.updateInfoPlayers(response.data);\n\n        _this.handleEndLoad();\n      })[\"catch\"](function () {\n        _this.handleErrorLoad();\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"loadRecentMatches\", function () {\n      var id = _this.props.id;\n      axios.get(BASE_URL + \"players/\" + id + \"/recentMatches\").then(function (response) {\n        _this.updateInfoRecentMatches(response.data);\n\n        _this.handleEndLoad();\n\n        console.dir(_this.state.recentMatches);\n      })[\"catch\"](function () {\n        _this.handleErrorLoad();\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateInfoPlayers\", function (newInfo) {\n      _this.setState({\n        players: newInfo\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateInfoRecentMatches\", function (newInfo) {\n      _this.setState({\n        recentMatches: newInfo\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleEndLoad\", function () {\n      _this.setState({\n        load: false,\n        error: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleErrorLoad\", function () {\n      _this.setState({\n        load: false,\n        error: true\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(PLayerInfo, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadPlayers();\n      this.loadRecentMatches();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          load = _this$state.load,\n          error = _this$state.error,\n          players = _this$state.players,\n          recentMatches = _this$state.recentMatches;\n      var profile = players.profile;\n      var avatarfull = profile.avatarfull,\n          personaname = profile.personaname,\n          profileurl = profile.profileurl;\n\n      var content = function () {\n        if (load) return React.createElement(Grid, {\n          container: true,\n          justify: \"center\",\n          alignItems: \"center\"\n        }, React.createElement(CircularProgress, null));\n        if (error) return React.createElement(Typography, {\n          variant: \"h5\",\n          align: \"center\",\n          component: \"h5\",\n          gutterBottom: true\n        }, \"\\u041F\\u0440\\u043E\\u0438\\u0437\\u043E\\u0448\\u043B\\u0430 \\u043E\\u0448\\u0438\\u0431\\u043A\\u0430...\");\n        return React.createElement(Card, null, React.createElement(PlayerHeader, {\n          avatar: avatarfull,\n          name: personaname,\n          url: profileurl\n        }), React.createElement(RecentMatches, {\n          recentMatches: recentMatches\n        }));\n      }();\n\n      return React.createElement(\"div\", null, content);\n    }\n  }]);\n\n  return PLayerInfo;\n}(Component);\n\nexport default PLayerInfo;","map":null,"metadata":{},"sourceType":"module"}